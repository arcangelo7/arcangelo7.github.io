---
const { dir, pagination, entry } = Astro.locals.starlightRoute;
const isRtl = dir === 'rtl';

// Check if current page is the index
const isIndex = entry.slug.endsWith('/index') || entry.slug === 'index';

// For reversed sidebar order:
// - Index is first, so it has no prev, only next (most recent date)
// - For other pages, swap prev/next
let prev, next;
if (isIndex) {
	// Index: no previous, next is the most recent date (which was originally the last item)
	prev = undefined;
	next = pagination.prev; // The original prev points to the most recent date after reversal
} else {
	// Other pages: swap prev and next
	prev = pagination.next;
	next = pagination.prev;
}

const leftArrow = '<path d="M17 11H9.41l3.3-3.29a1.004 1.004 0 1 0-1.42-1.42l-5 5a1 1 0 0 0-.21.33 1 1 0 0 0 0 .76 1 1 0 0 0 .21.33l5 5a1.002 1.002 0 0 0 1.639-.325 1 1 0 0 0-.219-1.095L9.41 13H17a1 1 0 0 0 0-2Z"/>';
const rightArrow = '<path d="M17.92 11.62a1.001 1.001 0 0 0-.21-.33l-5-5a1.003 1.003 0 1 0-1.42 1.42l3.3 3.29H7a1 1 0 0 0 0 2h7.59l-3.3 3.29a1.002 1.002 0 0 0 .325 1.639 1 1 0 0 0 1.095-.219l5-5a1 1 0 0 0 .21-.33 1 1 0 0 0 0-.76Z"/>';
---

<div class="pagination-links print:hidden" dir={dir}>
	{
		prev && (
			<a href={prev.href} rel="prev">
				<svg aria-hidden="true" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" set:html={isRtl ? rightArrow : leftArrow} />
				<span>
					{Astro.locals.t('page.previousLink')}
					<br />
					<span class="link-title">{prev.label}</span>
				</span>
			</a>
		)
	}
	{
		next && (
			<a href={next.href} rel="next">
				<svg aria-hidden="true" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" set:html={isRtl ? leftArrow : rightArrow} />
				<span>
					{Astro.locals.t('page.nextLink')}
					<br />
					<span class="link-title">{next.label}</span>
				</span>
			</a>
		)
	}
</div>

<style>
	@layer starlight.core {
		.pagination-links {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(min(18rem, 100%), 1fr));
			gap: 1rem;
		}

		a {
			display: flex;
			align-items: center;
			justify-content: flex-start;
			gap: 0.5rem;
			width: 100%;
			flex-basis: calc(50% - 0.5rem);
			flex-grow: 1;
			border: 1px solid var(--sl-color-gray-5);
			border-radius: 0.5rem;
			padding: 1rem;
			text-decoration: none;
			color: var(--sl-color-gray-2);
			box-shadow: var(--sl-shadow-md);
			overflow-wrap: anywhere;
		}
		[rel='next'] {
			justify-content: end;
			text-align: end;
			flex-direction: row-reverse;
		}
		a:hover {
			border-color: var(--sl-color-gray-2);
		}

		.link-title {
			color: var(--sl-color-white);
			font-size: var(--sl-text-2xl);
			line-height: var(--sl-line-height-headings);
		}

		svg {
			flex-shrink: 0;
			font-size: 1.5rem;
			width: 1em;
			height: 1em;
		}
	}
</style>
